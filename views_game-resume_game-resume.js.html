<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: views/game-resume/game-resume.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: views/game-resume/game-resume.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Game, Backlog, User } from "../../data/game_class.js"

const gameId = new URLSearchParams(window.location.search).get('id');
const game = Game.initFromId(gameId)
displayData()

function displayData() {
    document.getElementById("resume-title").textContent += game.name
    const backlogsContainer = document.getElementById("backlogs-container")

    // Display backlogs data*
    game.backlogs.forEach((backlog, i) => {
        const newBacklogElement = document.createElement("div");
        const newContent = document.createTextNode(backlog.title);
        newBacklogElement.classList.add("backlog-resume-list");
        if (i === 0) {
            newBacklogElement.classList.add("backlog-selected");
            backlogSelected(game.backlogs[i])
        }
        newBacklogElement.id = `backlog-${i}`

        newBacklogElement.appendChild(newContent);

        newBacklogElement.addEventListener("click", () => {
            const backlogs = document.getElementsByClassName("backlog-resume-list")
            for (let backlog of backlogs) {
                backlog.classList.remove("backlog-selected")
            }
            newBacklogElement.classList.add("backlog-selected")
            backlogSelected(game.backlogs[i])
        })

        backlogsContainer.insertAdjacentElement("beforeend", newBacklogElement)
    })
}

/**
 * @param {Backlog} backlog
 */
function backlogSelected(backlog) {
    const backlogData = document.getElementById("backlog-data")
    const backlogTitle = backlogData.childNodes[1]
    const backlogDescription = backlogData.childNodes[3]
    const backlogButton = backlogData.childNodes[5]

    backlogTitle.textContent = "Nom du backlog : " + backlog.title
    console.log(backlogDescription.childNodes);
    if (backlogDescription.childNodes.length >= 2) {
        backlogDescription.removeChild(backlogDescription.lastChild);
    }
    const descriptionText = document.createTextNode(backlog.description != null &amp;&amp; backlog.description !== "" ? backlog.description : "Pas de description")
    backlogDescription.appendChild(descriptionText)

    if (backlog.finalRate === -2) {
        backlogButton.textContent = "Commencer le vote de la fonctionnalité"
        backlogButton.onclick = () => {
            window.location.href = "../game/game.html?id=" + backlog.id + "&amp;backlog=" + backlog.id
        }
    } else if (backlog.finalRate === -1) {
        backlogButton.textContent = "Reprendre le vote de la fonctionnalité"
        backlogButton.onclick = () => {
            window.location.href = "../game/game.html?id=" + backlog.id + "&amp;backlog=" + backlog.id
        }
    } else {
        backlogButton.onclick = (e) => { e.preventDefault() }
        backlogButton.classList.add("disabled")
        backlogButton.textContent = "Le vote de la fonctionnalité a déjà été effectué"
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Backlog.html">Backlog</a></li><li><a href="Game.html">Game</a></li><li><a href="User.html">User</a></li></ul><h3>Global</h3><ul><li><a href="global.html#backlogSelected">backlogSelected</a></li><li><a href="global.html#deleteItem">deleteItem</a></li><li><a href="global.html#getItem">getItem</a></li><li><a href="global.html#setItem">setItem</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Dec 18 2024 15:20:40 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
